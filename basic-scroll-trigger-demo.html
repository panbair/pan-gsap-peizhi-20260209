<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAP åŸºç¡€æ»šåŠ¨è§¦å‘åŠ¨ç”»æ•™å­¦</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
        }

        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px 0;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 2rem;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .box {
            width: 150px;
            height: 150px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        /* ä¸åŒé¢œè‰²çš„ä¸»é¢˜ */
        .section1 { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .section2 { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .section3 { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .section4 { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .section5 { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }

        /* æ•™å­¦è¯´æ˜åŒºåŸŸ */
        .tutorial-section {
            background: #f8f9fa;
            padding: 40px;
            margin: 40px 0;
            border-radius: 15px;
            border-left: 5px solid #4f46e5;
        }

        .tutorial-title {
            color: #4f46e5;
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .tutorial-content {
            line-height: 1.8;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .highlight {
            background: #fff3cd;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        /* æ§åˆ¶é¢æ¿ */
        .control-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            z-index: 1000;
        }

        .control-btn {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #4f46e5;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .control-btn:hover {
            background: #667eea;
        }

        /* è¿›åº¦æ¡ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: rgba(0,0,0,0.1);
            z-index: 1001;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #4f46e5, #667eea);
            transition: width 0.1s ease;
        }
    </style>
</head>
<body>
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <h3>æ§åˆ¶é¢æ¿</h3>
        <button class="control-btn" onclick="resetAnimations()">é‡ç½®åŠ¨ç”»</button>
        <button class="control-btn" onclick="toggleMarkers()">åˆ‡æ¢æ ‡è®°</button>
        <button class="control-btn" onclick="scrollToSection(1)">è·³è½¬åˆ°ç¬¬1èŠ‚</button>
        <button class="control-btn" onclick="scrollToSection(2)">è·³è½¬åˆ°ç¬¬2èŠ‚</button>
        <button class="control-btn" onclick="scrollToSection(3)">è·³è½¬åˆ°ç¬¬3èŠ‚</button>
    </div>

    <!-- è¿›åº¦æ¡ -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="demo-container">
        <!-- æ•™å­¦è¯´æ˜ -->
        <div class="tutorial-section">
            <h2 class="tutorial-title">ğŸ¯ GSAP æ»šåŠ¨è§¦å‘åŠ¨ç”»å…¥é—¨æ•™ç¨‹</h2>
            <div class="tutorial-content">
                <p>è¿™æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º Three.js æ–°æ‰‹è®¾è®¡çš„ GSAP æ»šåŠ¨åŠ¨ç”»æ•™å­¦ç¤ºä¾‹ã€‚</p>
                <p>å½“ä½ å‘ä¸‹æ»šåŠ¨é¡µé¢æ—¶ï¼Œä¼šçœ‹åˆ°ä¸åŒçš„åŠ¨ç”»æ•ˆæœè¢«è§¦å‘ï¼š</p>
                <ul>
                    <li><span class="highlight">æ·¡å…¥æ•ˆæœ</span> - å…ƒç´ ä»é€æ˜å˜ä¸ºå¯è§</li>
                    <li><span class="highlight">ä½ç§»åŠ¨ç”»</span> - å…ƒç´ ä»ä¸åŒæ–¹å‘æ»‘å…¥</li>
                    <li><span class="highlight">ç¼©æ”¾æ•ˆæœ</span> - å…ƒç´ ä»å°å˜å¤§å‡ºç°</li>
                    <li><span class="highlight">æ—‹è½¬åŠ¨ç”»</span> - å…ƒç´ å¸¦æœ‰æ—‹è½¬æ•ˆæœ</li>
                </ul>
                <p>å³ä¾§çš„æ§åˆ¶é¢æ¿å¯ä»¥å¸®ä½ æµ‹è¯•ä¸åŒçš„åŠŸèƒ½ã€‚</p>
            </div>
        </div>

        <!-- ç¬¬ä¸€èŠ‚ï¼šåŸºç¡€æ·¡å…¥åŠ¨ç”» -->
        <section class="section section1" id="section1">
            <div>
                <h2 class="section-title">ç¬¬ä¸€èŠ‚ï¼šåŸºç¡€æ·¡å…¥åŠ¨ç”»</h2>
                <div class="box" id="box1">Box 1</div>
            </div>
        </section>

        <div class="tutorial-section">
            <h3 class="tutorial-title">ğŸ“˜ ä»£ç è§£æ - åŸºç¡€æ·¡å…¥</h3>
            <div class="code-block">
// åŸºç¡€æ·¡å…¥åŠ¨ç”»ç¤ºä¾‹
gsap.from('#box1', {
    opacity: 0,           // åˆå§‹é€æ˜åº¦ä¸º0
    y: 50,               // å‘ä¸‹åç§»50åƒç´ 
    duration: 1,         // åŠ¨ç”»æŒç»­1ç§’
    ease: 'power3.out',  // ç¼“åŠ¨å‡½æ•°
    scrollTrigger: {
        trigger: '#section1',  // è§¦å‘å…ƒç´ 
        start: 'top 80%',      // å½“è§¦å‘å…ƒç´ é¡¶éƒ¨åˆ°è¾¾è§†å£80%ä½ç½®æ—¶å¼€å§‹
        toggleActions: 'play none none reverse'  // è¿›å…¥æ’­æ”¾ï¼Œç¦»å¼€åå‘
    }
});
            </div>
            <p><span class="highlight">å…³é”®å‚æ•°è¯´æ˜ï¼š</span></p>
            <ul>
                <li><code>trigger</code>: æŒ‡å®šå“ªä¸ªå…ƒç´ è§¦å‘åŠ¨ç”»</li>
                <li><code>start</code>: å®šä¹‰è§¦å‘æ—¶æœº ('top 80%' è¡¨ç¤ºå…ƒç´ é¡¶éƒ¨åˆ°è¾¾è§†å£80%ä½ç½®)</li>
                <li><code>toggleActions</code>: å®šä¹‰è¿›å…¥/ç¦»å¼€æ—¶çš„è¡Œä¸º</li>
            </ul>
        </div>

        <!-- ç¬¬äºŒèŠ‚ï¼šä½ç§»æ»‘å…¥åŠ¨ç”» -->
        <section class="section section2" id="section2">
            <div>
                <h2 class="section-title">ç¬¬äºŒèŠ‚ï¼šä½ç§»æ»‘å…¥åŠ¨ç”»</h2>
                <div class="box" id="box2">Box 2</div>
            </div>
        </section>

        <div class="tutorial-section">
            <h3 class="tutorial-title">ğŸ“˜ ä»£ç è§£æ - ä½ç§»æ»‘å…¥</h3>
            <div class="code-block">
// ä»å·¦ä¾§æ»‘å…¥åŠ¨ç”»
gsap.from('#box2', {
    x: -100,             // ä»å·¦å´100åƒç´ å¼€å§‹
    opacity: 0,          // åˆå§‹é€æ˜
    duration: 0.8,
    ease: 'back.out(1.7)', // å¼¹æ€§ç¼“åŠ¨æ•ˆæœ
    scrollTrigger: {
        trigger: '#section2',
        start: 'center bottom',  // å½“è§¦å‘å…ƒç´ ä¸­å¿ƒåˆ°è¾¾è§†å£åº•éƒ¨æ—¶å¼€å§‹
        markers: true            // æ˜¾ç¤ºè°ƒè¯•æ ‡è®°ï¼ˆå¼€å‘æ—¶å¾ˆæœ‰ç”¨ï¼‰
    }
});
            </div>
        </div>

        <!-- ç¬¬ä¸‰èŠ‚ï¼šç¼©æ”¾åŠ¨ç”» -->
        <section class="section section3" id="section3">
            <div>
                <h2 class="section-title">ç¬¬ä¸‰èŠ‚ï¼šç¼©æ”¾åŠ¨ç”»</h2>
                <div class="box" id="box3">Box 3</div>
            </div>
        </section>

        <div class="tutorial-section">
            <h3 class="tutorial-title">ğŸ“˜ ä»£ç è§£æ - ç¼©æ”¾æ•ˆæœ</h3>
            <div class="code-block">
// ç¼©æ”¾æ·¡å…¥åŠ¨ç”»
gsap.from('#box3', {
    scale: 0,            // ä»0å€ç¼©æ”¾å¼€å§‹
    opacity: 0,
    duration: 1,
    ease: 'elastic.out(1, 0.3)', // å¼¹æ€§æ•ˆæœ
    scrollTrigger: {
        trigger: '#section3',
        start: 'top center',     // å½“è§¦å‘å…ƒç´ é¡¶éƒ¨åˆ°è¾¾è§†å£ä¸­å¿ƒæ—¶å¼€å§‹
        end: 'bottom center',    // å½“è§¦å‘å…ƒç´ åº•éƒ¨åˆ°è¾¾è§†å£ä¸­å¿ƒæ—¶ç»“æŸ
        toggleActions: 'play pause resume reverse'
    }
});
            </div>
        </div>

        <!-- ç¬¬å››èŠ‚ï¼šæ—‹è½¬åŠ¨ç”» -->
        <section class="section section4" id="section4">
            <div>
                <h2 class="section-title">ç¬¬å››èŠ‚ï¼šæ—‹è½¬åŠ¨ç”»</h2>
                <div class="box" id="box4">Box 4</div>
            </div>
        </section>

        <div class="tutorial-section">
            <h3 class="tutorial-title">ğŸ“˜ ä»£ç è§£æ - æ—‹è½¬æ•ˆæœ</h3>
            <div class="code-block">
// æ—‹è½¬+æ·¡å…¥åŠ¨ç”»
gsap.from('#box4', {
    rotation: 180,       // æ—‹è½¬180åº¦
    opacity: 0,
    duration: 1.2,
    ease: 'power2.out',
    scrollTrigger: {
        trigger: '#section4',
        start: 'top 70%',
        scrub: 1             // å¹³æ»‘è·Ÿéšæ»šåŠ¨
    }
});
            </div>
        </div>

        <!-- ç¬¬äº”èŠ‚ï¼šå¤åˆåŠ¨ç”» -->
        <section class="section section5" id="section5">
            <div>
                <h2 class="section-title">ç¬¬äº”èŠ‚ï¼šå¤åˆåŠ¨ç”»åºåˆ—</h2>
                <div class="box" id="box5">Box 5</div>
            </div>
        </section>

        <div class="tutorial-section">
            <h3 class="tutorial-title">ğŸ“˜ ä»£ç è§£æ - å¤åˆåŠ¨ç”»</h3>
            <div class="code-block">
// åˆ›å»ºåŠ¨ç”»æ—¶é—´çº¿
const tl = gsap.timeline({
    scrollTrigger: {
        trigger: '#section5',
        start: 'top 80%',
        toggleActions: 'play none none reverse'
    }
});

// æŒ‰é¡ºåºæ·»åŠ å¤šä¸ªåŠ¨ç”»
tl.from('#box5', { opacity: 0, y: 50, duration: 0.5 })
  .to('#box5', { x: 100, duration: 0.5 })     // ç›¸å¯¹ç§»åŠ¨
  .to('#box5', { rotation: 360, duration: 1 }) // æ—‹è½¬ä¸€åœˆ
  .to('#box5', { scale: 1.5, duration: 0.5 })  // æ”¾å¤§
  .to('#box5', { scale: 1, duration: 0.3 });   // æ¢å¤åŸå¤§å°
            </div>
        </div>

        <!-- æ€»ç»“ -->
        <div class="tutorial-section">
            <h2 class="tutorial-title">ğŸ“ å­¦ä¹ æ€»ç»“</h2>
            <div class="tutorial-content">
                <h3>æ ¸å¿ƒæ¦‚å¿µï¼š</h3>
                <ol>
                    <li><span class="highlight">ScrollTrigger</span> æ˜¯ GSAP çš„æ»šåŠ¨è§¦å‘æ’ä»¶</li>
                    <li><span class="highlight">trigger</span> æŒ‡å®šå“ªä¸ªå…ƒç´ è§¦å‘åŠ¨ç”»</li>
                    <li><span class="highlight">start/end</span> å®šä¹‰è§¦å‘æ—¶æœº</li>
                    <li><span class="highlight">toggleActions</span> æ§åˆ¶è¿›å…¥/ç¦»å¼€è¡Œä¸º</li>
                    <li><span class="highlight">scrub</span> å®ç°å¹³æ»‘è·Ÿéšæ»šåŠ¨æ•ˆæœ</li>
                </ol>
                
                <h3>å®ç”¨æŠ€å·§ï¼š</h3>
                <ul>
                    <li>ä½¿ç”¨ <code>markers: true</code> è°ƒè¯•åŠ¨ç”»è§¦å‘ç‚¹</li>
                    <li>åˆç†é€‰æ‹© <code>start</code> å’Œ <code>end</code> å‚æ•°</li>
                    <li>å–„ç”¨ <code>timeline</code> åˆ›å»ºå¤æ‚åŠ¨ç”»åºåˆ—</li>
                    <li>æ³¨æ„æ€§èƒ½ä¼˜åŒ–ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„åŠ¨ç”»</li>
                </ul>
                
                <p style="margin-top: 20px; font-weight: bold;">
                    ğŸ’¡ ç°åœ¨ä½ å·²ç»æŒæ¡äº† GSAP æ»šåŠ¨åŠ¨ç”»çš„åŸºç¡€çŸ¥è¯†ï¼å¯ä»¥å°è¯•ä¿®æ”¹ä»£ç åˆ›å»ºè‡ªå·±çš„åŠ¨ç”»æ•ˆæœã€‚
                </p>
            </div>
        </div>
    </div>

    <script>
        // æ³¨å†Œæ’ä»¶
        gsap.registerPlugin(ScrollTrigger);

        // å…¨å±€å˜é‡
        let markersEnabled = false;

        // ç¬¬ä¸€èŠ‚ï¼šåŸºç¡€æ·¡å…¥åŠ¨ç”»
        gsap.from('#box1', {
            opacity: 0,
            y: 50,
            duration: 1,
            ease: 'power3.out',
            scrollTrigger: {
                trigger: '#section1',
                start: 'top 80%',
                toggleActions: 'play none none reverse',
                markers: markersEnabled
            }
        });

        // ç¬¬äºŒèŠ‚ï¼šä½ç§»æ»‘å…¥åŠ¨ç”»
        gsap.from('#box2', {
            x: -100,
            opacity: 0,
            duration: 0.8,
            ease: 'back.out(1.7)',
            scrollTrigger: {
                trigger: '#section2',
                start: 'center bottom',
                markers: markersEnabled
            }
        });

        // ç¬¬ä¸‰èŠ‚ï¼šç¼©æ”¾åŠ¨ç”»
        gsap.from('#box3', {
            scale: 0,
            opacity: 0,
            duration: 1,
            ease: 'elastic.out(1, 0.3)',
            scrollTrigger: {
                trigger: '#section3',
                start: 'top center',
                end: 'bottom center',
                toggleActions: 'play pause resume reverse',
                markers: markersEnabled
            }
        });

        // ç¬¬å››èŠ‚ï¼šæ—‹è½¬åŠ¨ç”»
        gsap.from('#box4', {
            rotation: 180,
            opacity: 0,
            duration: 1.2,
            ease: 'power2.out',
            scrollTrigger: {
                trigger: '#section4',
                start: 'top 70%',
                scrub: 1,  // å¹³æ»‘è·Ÿéšæ»šåŠ¨
                markers: markersEnabled
            }
        });

        // ç¬¬äº”èŠ‚ï¼šå¤åˆåŠ¨ç”»åºåˆ—
        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: '#section5',
                start: 'top 80%',
                toggleActions: 'play none none reverse',
                markers: markersEnabled
            }
        });

        tl.from('#box5', { opacity: 0, y: 50, duration: 0.5 })
          .to('#box5', { x: 100, duration: 0.5 })
          .to('#box5', { rotation: 360, duration: 1 })
          .to('#box5', { scale: 1.5, duration: 0.5 })
          .to('#box5', { scale: 1, duration: 0.3 });

        // æ»šåŠ¨è¿›åº¦æ¡
        gsap.to('#progressBar', {
            width: '100%',
            ease: 'none',
            scrollTrigger: {
                trigger: '.demo-container',
                start: 'top top',
                end: 'bottom bottom',
                scrub: 0.3
            }
        });

        // æ§åˆ¶é¢æ¿åŠŸèƒ½
        function resetAnimations() {
            // é‡ç½®æ‰€æœ‰å…ƒç´ åˆ°åˆå§‹çŠ¶æ€
            gsap.set(['#box1', '#box2', '#box3', '#box4', '#box5'], {
                opacity: 1,
                x: 0,
                y: 0,
                scale: 1,
                rotation: 0
            });
            
            // åˆ·æ–° ScrollTrigger
            ScrollTrigger.refresh();
            
            alert('åŠ¨ç”»å·²é‡ç½®ï¼');
        }

        function toggleMarkers() {
            markersEnabled = !markersEnabled;
            ScrollTrigger.getAll().forEach(trigger => {
                if (markersEnabled) {
                    trigger.enable();
                } else {
                    trigger.disable();
                }
            });
            alert(`æ ‡è®°${markersEnabled ? 'å·²å¼€å¯' : 'å·²å…³é—­'}`);
        }

        function scrollToSection(sectionNum) {
            const section = document.getElementById(`section${sectionNum}`);
            if (section) {
                section.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('GSAP æ»šåŠ¨åŠ¨ç”»æ•™å­¦é¡µé¢åŠ è½½å®Œæˆï¼');
            console.log('å¯ç”¨çš„æ§åˆ¶åŠŸèƒ½ï¼š');
            console.log('- å³ä¾§æ§åˆ¶é¢æ¿å¯ä»¥æµ‹è¯•å„ç§åŠŸèƒ½');
            console.log('- æ»šåŠ¨é¡µé¢æŸ¥çœ‹ä¸åŒåŠ¨ç”»æ•ˆæœ');
            console.log('- æŸ¥çœ‹ä»£ç å—äº†è§£å®ç°åŸç†');
        });
    </script>
</body>
</html>